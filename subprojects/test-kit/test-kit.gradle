import org.gradle.gradlebuild.unittestandcompile.ModuleType

plugins {
    id 'gradlebuild.strict-compile'
}

dependencies {
    compile project(':core')
    compile project(':toolingApi')
    compile libraries.commons_io.coordinates
    runtime project(':native')
    compileOnly('org.spockframework:spock-core:1.0-groovy-2.4') {
        exclude group: 'org.codehaus.groovy', module: 'groovy-all'
    }
    integTestRuntime project(':toolingApiBuilders')
    integTestRuntime project(':pluginDevelopment')
}

gradlebuildJava {
    moduleType = ModuleType.CORE
}

testFixtures {
    from(':core')
}

task crossVersionTests(type: org.gradle.gradlebuild.test.integrationtests.IntegrationTest) {
    description "Runs the TestKit version compatibility tests"
    systemProperties['org.gradle.integtest.testkit.compatibility'] = 'all'
    systemProperties['org.gradle.integtest.executer'] = 'forking'
}

import org.gradle.gradlebuild.testing.integrationtests.cleanup.WhenNotEmpty
testFilesCleanup {
    policy = WhenNotEmpty.REPORT
}
